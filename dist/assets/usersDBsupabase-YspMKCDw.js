import{ap as a}from"./index-v6CNqsEH.js";const i=async()=>{try{console.log("üîç Loading users using REST API (like Pets)...");const s="https://ztubrfjqsckplmelezws.supabase.co",e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0",t=`${s}/rest/v1/profiles?select=*&order=created_at.desc`,r=await fetch(t,{headers:{apikey:e,Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error(`Failed to fetch users: ${r.status} ${r.statusText}`);const o=await r.json();return console.log("‚úÖ Users REST API call succeeded:",o.length),o}catch(s){console.error("‚ùå REST API call failed:",s);try{console.log("üîÑ Trying Supabase client as fallback...");const{data:e,error:t}=await a.from("profiles").select("*").order("created_at",{ascending:!1});if(t)throw t;return console.log("‚úÖ Supabase client succeeded:",(e==null?void 0:e.length)||0),e||[]}catch(e){throw console.error("‚ùå All methods failed:",e),e}}},l=async(s,e)=>{try{console.log(`üîÑ Updating user ${s} status to: ${e}`);const t="https://ztubrfjqsckplmelezws.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0",o=`${t}/rest/v1/profiles?id=eq.${s}`,c=await fetch(o,{method:"PATCH",headers:{apikey:r,Authorization:`Bearer ${r}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify({status:e,updated_at:new Date().toISOString()})});if(!c.ok)throw new Error(`Failed to update user status: ${c.status} ${c.statusText}`);return console.log("‚úÖ User status updated successfully"),!0}catch(t){throw console.error("‚ùå Failed to update user status:",t),t}},u=async(s,e)=>{try{console.log(`üîÑ Updating user ${s} role to: ${e}`);const t="https://ztubrfjqsckplmelezws.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0",o=`${t}/rest/v1/profiles?id=eq.${s}`,c=await fetch(o,{method:"PATCH",headers:{apikey:r,Authorization:`Bearer ${r}`,"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify({role:e,updated_at:new Date().toISOString()})});if(!c.ok)throw new Error(`Failed to update user role: ${c.status} ${c.statusText}`);return console.log("‚úÖ User role updated successfully"),!0}catch(t){throw console.error("‚ùå Failed to update user role:",t),t}},p=async s=>{try{console.log(`üóëÔ∏è Deleting user ${s}`);const e="https://ztubrfjqsckplmelezws.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0",r=`${e}/rest/v1/profiles?id=eq.${s}`,o=await fetch(r,{method:"DELETE",headers:{apikey:t,Authorization:`Bearer ${t}`,Prefer:"return=minimal"}});if(!o.ok)throw new Error(`Failed to delete user: ${o.status} ${o.statusText}`);return console.log("‚úÖ User deleted successfully"),!0}catch(e){throw console.error("‚ùå Failed to delete user:",e),e}};export{u as a,p as d,i as g,l as u};
