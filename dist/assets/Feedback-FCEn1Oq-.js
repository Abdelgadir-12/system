import{c as P,r as c,v as B,j as e,a2 as w,C as i,a as d,S as j,x as k,y as S,A as p,E as f,F as v,G as N,H as r,h as G,D as H,aq as J,t as D,m as $,n as q,o as z}from"./index-v6CNqsEH.js";import{B as u}from"./badge-CT0QDU03.js";import{I as W}from"./input-cEcEyZ5x.js";import{S as K}from"./search-C8KJh43r.js";import{U as Q}from"./user-D7P0ucSc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=P("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),F={general:"General Feedback",appointment:"Appointment Service",veterinary:"Veterinary Care",grooming:"Pet Grooming",pharmacy:"Pharmacy Services",website:"Website Experience",staff:"Staff Service",other:"Other"},Y={new:"bg-blue-100 text-blue-800",reviewed:"bg-green-100 text-green-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-gray-100 text-gray-800"};function ce(){const[l,y]=c.useState([]),[b,A]=c.useState([]),[n,R]=c.useState(""),[o,E]=c.useState("all"),[h,I]=c.useState("all"),[m,L]=c.useState("all"),[Z,T]=c.useState(null);c.useState(!1);const{toast:g}=B();c.useEffect(()=>{_()},[]),c.useEffect(()=>{V()},[l,n,o,h,m]);const _=()=>{try{const s=localStorage.getItem("feedback");if(s){const a=JSON.parse(s);y(a)}}catch(s){console.error("Error loading feedback:",s),g({title:"Error",description:"Failed to load feedback data.",variant:"destructive"})}},V=()=>{let s=[...l];n&&(s=s.filter(a=>{var t,x;return a.message.toLowerCase().includes(n.toLowerCase())||((t=a.userName)==null?void 0:t.toLowerCase().includes(n.toLowerCase()))||((x=a.userEmail)==null?void 0:x.toLowerCase().includes(n.toLowerCase()))})),o&&o!=="all"&&(s=s.filter(a=>a.category===o)),h&&h!=="all"&&(s=s.filter(a=>a.rating===parseInt(h))),m&&m!=="all"&&(s=s.filter(a=>a.status===m)),A(s)},O=(s,a)=>{try{const t=l.map(x=>x.id===s?{...x,status:a}:x);y(t),localStorage.setItem("feedback",JSON.stringify(t)),g({title:"Status Updated",description:"Feedback status has been updated successfully."})}catch{g({title:"Error",description:"Failed to update feedback status.",variant:"destructive"})}},U=s=>{try{const a=l.filter(t=>t.id!==s);y(a),localStorage.setItem("feedback",JSON.stringify(a)),g({title:"Feedback Deleted",description:"Feedback has been deleted successfully."})}catch{g({title:"Error",description:"Failed to delete feedback.",variant:"destructive"})}},M=()=>l.length===0?0:(l.reduce((a,t)=>a+t.rating,0)/l.length).toFixed(1),C=(()=>{const s={1:0,2:0,3:0,4:0,5:0};return l.forEach(a=>{s[a.rating]++}),s})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Feedback Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage and review user feedback"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-6 w-6 text-pet-blue-dark"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," total feedback"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Feedback"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.length})]}),e.jsx(w,{className:"h-8 w-8 text-pet-blue-dark"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Average Rating"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M()})]}),e.jsx(j,{className:"h-8 w-8 text-yellow-400"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"New Feedback"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.filter(s=>s.status==="new").length})]}),e.jsx(u,{className:"bg-blue-100 text-blue-800",children:"New"})]})})}),e.jsx(i,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.filter(s=>s.status==="resolved").length})]}),e.jsx(u,{className:"bg-green-100 text-green-800",children:"Resolved"})]})})})]}),e.jsxs(i,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-yellow-400"}),"Rating Distribution"]})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-5 gap-4",children:[5,4,3,2,1].map(s=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:[...Array(s)].map((a,t)=>e.jsx(j,{className:"h-4 w-4 text-yellow-400 fill-current"},t))}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C[s]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.length>0?`${(C[s]/l.length*100).toFixed(1)}%`:"0%"})]},s))})})]}),e.jsxs(i,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(W,{placeholder:"Search feedback...",value:n,onChange:s=>R(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(p,{value:o,onValueChange:E,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"All categories"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"All categories"}),Object.entries(F).map(([s,a])=>e.jsx(r,{value:s,children:a},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Rating"}),e.jsxs(p,{value:h,onValueChange:I,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"All ratings"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"All ratings"}),[5,4,3,2,1].map(s=>e.jsxs(r,{value:s.toString(),children:[s," Star",s!==1?"s":""]},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(p,{value:m,onValueChange:L,children:[e.jsx(f,{children:e.jsx(v,{placeholder:"All statuses"})}),e.jsxs(N,{children:[e.jsx(r,{value:"all",children:"All statuses"}),e.jsx(r,{value:"new",children:"New"}),e.jsx(r,{value:"reviewed",children:"Reviewed"}),e.jsx(r,{value:"in_progress",children:"In Progress"}),e.jsx(r,{value:"resolved",children:"Resolved"})]})]})]})]})})]}),e.jsxs(i,{children:[e.jsx(k,{children:e.jsxs(S,{children:["Feedback (",b.length," of ",l.length,")"]})}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No feedback found"})]}):b.map(s=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,t)=>e.jsx(j,{className:`h-4 w-4 ${t<s.rating?"text-yellow-400 fill-current":"text-gray-300"}`},t))}),e.jsx(u,{variant:"outline",children:F[s.category]||s.category}),e.jsx(u,{className:Y[s.status]||"bg-gray-100 text-gray-800",children:s.status.replace("_"," ")})]}),e.jsx("p",{className:"text-gray-900 dark:text-white mb-2 line-clamp-2",children:s.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[s.userName&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:s.userName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 ml-4",children:e.jsxs(H,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{variant:"outline",size:"sm",onClick:()=>T(s),children:"View Details"})}),e.jsxs($,{className:"max-w-2xl",children:[e.jsx(q,{children:e.jsx(z,{children:"Feedback Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,t)=>e.jsx(j,{className:`h-5 w-5 ${t<s.rating?"text-yellow-400 fill-current":"text-gray-300"}`},t))}),e.jsx(u,{variant:"outline",children:F[s.category]||s.category})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Message"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:s.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"User:"})," ",s.userName||"Anonymous"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.userEmail||"Not provided"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(s.createdAt).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",s.status.replace("_"," ")]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t",children:[e.jsx("span",{className:"text-sm font-medium",children:"Update Status:"}),e.jsxs(p,{value:s.status,onValueChange:a=>O(s.id,a),children:[e.jsx(f,{className:"w-32",children:e.jsx(v,{})}),e.jsxs(N,{children:[e.jsx(r,{value:"new",children:"New"}),e.jsx(r,{value:"reviewed",children:"Reviewed"}),e.jsx(r,{value:"in_progress",children:"In Progress"}),e.jsx(r,{value:"resolved",children:"Resolved"})]})]}),e.jsx(D,{variant:"destructive",size:"sm",onClick:()=>U(s.id),children:"Delete"})]})]})]})]})})]})},s.id))})})]})]})}export{ce as default};
