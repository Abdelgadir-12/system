import{r as o,j as e,h as N}from"./index-v6CNqsEH.js";import{g as S}from"./usersDBsupabase-YspMKCDw.js";import{T as w,a as I,b as m,c as i,d as b,e as c}from"./table-kUQv3v_S.js";import{I as g}from"./input-cEcEyZ5x.js";import{S as y}from"./search-C8KJh43r.js";const C=()=>{const[u,h]=o.useState([]),[n,j]=o.useState(""),[d,f]=o.useState("");o.useEffect(()=>{(async()=>{try{console.log("ðŸ” Loading signups using REST API (like Pets)...");const r="https://ztubrfjqsckplmelezws.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0",p=`${r}/rest/v1/profiles?select=*&order=created_at.desc`,t=await fetch(p,{headers:{apikey:a,Authorization:`Bearer ${a}`}});if(!t.ok)throw new Error(`Failed to fetch signups: ${t.status} ${t.statusText}`);const l=await t.json();console.log("âœ… Signups REST API call succeeded:",l.length),h(l)}catch(r){console.error("âŒ REST API call failed:",r);try{console.log("ðŸ”„ Trying original method as fallback...");const a=await S();h(a)}catch(a){console.error("âŒ Original method failed:",a)}}})()},[]);const x=u.filter(s=>{var t,l;const r=(((t=s.name)==null?void 0:t.toLowerCase())||"").includes(n.toLowerCase())||(((l=s.email)==null?void 0:l.toLowerCase())||"").includes(n.toLowerCase()),a=s.created_at?s.created_at.split("T")[0]:"";return r&&(d===""||a===d)});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"New Sign Ups"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"text",placeholder:"Search users...",className:"pl-10 pr-4 py-2",value:n,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"date",className:"w-auto",value:d,onChange:s=>f(s.target.value)})]})]}),e.jsx("div",{className:"border rounded-md",children:e.jsxs(w,{children:[e.jsx(I,{children:e.jsxs(m,{children:[e.jsx(i,{children:"User ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Sign Up Date"})]})}),e.jsxs(b,{children:[x.map(s=>e.jsxs(m,{children:[e.jsx(c,{className:"font-medium",children:s.id}),e.jsx(c,{children:s.name}),e.jsx(c,{children:s.email}),e.jsx(c,{children:s.date})]},s.id)),x.length===0&&e.jsx(m,{children:e.jsx(c,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"No sign ups found"})})]})]})})]})};export{C as default};
