import{c as Te,r as a,j as t,a7 as Ae,O as V,a8 as ke,P as Oe,a9 as we,Q as O,U as v,aa as xe,K as Fe,ab as Le,ac as Bt,V as ce,ad as zt,ae as Vt,af as Yt,ag as Xt,ah as Ht,ai as Jt,aj as Ge,ak as Wt,l as Zt,al as Qt,am as qt,an as en,i as F,Z as Ke,v as tn,ao as nn,X as on}from"./index-v6CNqsEH.js";import{T as rn,a as an,b as re,c as k,d as sn,e as D}from"./table-kUQv3v_S.js";import{a as cn,b as un,d as dn}from"./appointmentDB-CWMaHyPF.js";import{C as ln}from"./chevron-right-CbkHHRQO.js";import{S as pn}from"./search-C8KJh43r.js";import{C as De}from"./clock-BzgeTgUr.js";import{T as fn}from"./trash-2-RYy7qFoW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=Te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Te("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function hn(e,o=[]){let n=[];function r(c,u){const d=a.createContext(u),f=n.length;n=[...n,u];function m(i){const{scope:p,children:w,...h}=i,C=(p==null?void 0:p[e][f])||d,R=a.useMemo(()=>h,Object.values(h));return t.jsx(C.Provider,{value:R,children:w})}function x(i,p){const w=(p==null?void 0:p[e][f])||d,h=a.useContext(w);if(h)return h;if(u!==void 0)return u;throw new Error(`\`${i}\` must be used within \`${c}\``)}return m.displayName=c+"Provider",[m,x]}const s=()=>{const c=n.map(u=>a.createContext(u));return function(d){const f=(d==null?void 0:d[e])||c;return a.useMemo(()=>({[`__scope${e}`]:{...d,[e]:f}}),[d,f])}};return s.scopeName=e,[r,gn(s,...o)]}function gn(...e){const o=e[0];if(e.length===1)return o;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(c){const u=r.reduce((d,{useScope:f,scopeName:m})=>{const i=f(c)[`__scope${m}`];return{...d,...i}},{});return a.useMemo(()=>({[`__scope${o.scopeName}`]:u}),[u])}};return n.scopeName=o.scopeName,n}var me="rovingFocusGroup.onEntryFocus",vn={bubbles:!1,cancelable:!0},ie="RovingFocusGroup",[he,$e,wn]=Ae(ie),[Mn,Ue]=hn(ie,[wn]),[Cn,bn]=Mn(ie),Be=a.forwardRef((e,o)=>t.jsx(he.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(he.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(_n,{...e,ref:o})})}));Be.displayName=ie;var _n=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:x=!1,...i}=e,p=a.useRef(null),w=V(o,p),h=ke(c),[C=null,R]=Oe({prop:u,defaultProp:d,onChange:f}),[l,M]=a.useState(!1),S=we(m),b=$e(n),N=a.useRef(!1),[te,L]=a.useState(0);return a.useEffect(()=>{const _=p.current;if(_)return _.addEventListener(me,S),()=>_.removeEventListener(me,S)},[S]),t.jsx(Cn,{scope:n,orientation:r,dir:h,loop:s,currentTabStopId:C,onItemFocus:a.useCallback(_=>R(_),[R]),onItemShiftTab:a.useCallback(()=>M(!0),[]),onFocusableItemAdd:a.useCallback(()=>L(_=>_+1),[]),onFocusableItemRemove:a.useCallback(()=>L(_=>_-1),[]),children:t.jsx(O.div,{tabIndex:l||te===0?-1:0,"data-orientation":r,...i,ref:w,style:{outline:"none",...e.style},onMouseDown:v(e.onMouseDown,()=>{N.current=!0}),onFocus:v(e.onFocus,_=>{const U=!N.current;if(_.target===_.currentTarget&&U&&!l){const G=new CustomEvent(me,vn);if(_.currentTarget.dispatchEvent(G),!G.defaultPrevented){const Y=b().filter(P=>P.focusable),X=Y.find(P=>P.active),ne=Y.find(P=>P.id===C),le=[X,ne,...Y].filter(Boolean).map(P=>P.ref.current);Ye(le,x)}}N.current=!1}),onBlur:v(e.onBlur,()=>M(!1))})})}),ze="RovingFocusGroupItem",Ve=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:c,...u}=e,d=xe(),f=c||d,m=bn(ze,n),x=m.currentTabStopId===f,i=$e(n),{onFocusableItemAdd:p,onFocusableItemRemove:w}=m;return a.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),t.jsx(he.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:t.jsx(O.span,{tabIndex:x?0:-1,"data-orientation":m.orientation,...u,ref:o,onMouseDown:v(e.onMouseDown,h=>{r?m.onItemFocus(f):h.preventDefault()}),onFocus:v(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:v(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){m.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const C=Sn(h,m.orientation,m.dir);if(C!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let l=i().filter(M=>M.focusable).map(M=>M.ref.current);if(C==="last")l.reverse();else if(C==="prev"||C==="next"){C==="prev"&&l.reverse();const M=l.indexOf(h.currentTarget);l=m.loop?In(l,M+1):l.slice(M+1)}setTimeout(()=>Ye(l))}})})})});Ve.displayName=ze;var yn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Rn(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Sn(e,o,n){const r=Rn(e.key,n);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yn[r]}function Ye(e,o=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:o}),document.activeElement!==n))return}function In(e,o){return e.map((n,r)=>e[(o+r)%e.length])}var jn=Be,Nn=Ve,ge=["Enter"," "],En=["ArrowDown","PageUp","Home"],Xe=["ArrowUp","PageDown","End"],Dn=[...En,...Xe],Pn={ltr:[...ge,"ArrowRight"],rtl:[...ge,"ArrowLeft"]},Tn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},q="Menu",[Z,An,kn]=Ae(q),[K,He]=Fe(q,[kn,Le,Ue]),ue=Le(),Je=Ue(),[On,$]=K(q),[Fn,ee]=K(q),We=e=>{const{__scopeMenu:o,open:n=!1,children:r,dir:s,onOpenChange:c,modal:u=!0}=e,d=ue(o),[f,m]=a.useState(null),x=a.useRef(!1),i=we(c),p=ke(s);return a.useEffect(()=>{const w=()=>{x.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>x.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),t.jsx(qt,{...d,children:t.jsx(On,{scope:o,open:n,onOpenChange:i,content:f,onContentChange:m,children:t.jsx(Fn,{scope:o,onClose:a.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:x,dir:p,modal:u,children:r})})})};We.displayName=q;var Ln="MenuAnchor",Me=a.forwardRef((e,o)=>{const{__scopeMenu:n,...r}=e,s=ue(n);return t.jsx(Bt,{...s,...r,ref:o})});Me.displayName=Ln;var Ce="MenuPortal",[Gn,Ze]=K(Ce,{forceMount:void 0}),Qe=e=>{const{__scopeMenu:o,forceMount:n,children:r,container:s}=e,c=$(Ce,o);return t.jsx(Gn,{scope:o,forceMount:n,children:t.jsx(ce,{present:n||c.open,children:t.jsx(en,{asChild:!0,container:s,children:r})})})};Qe.displayName=Ce;var j="MenuContent",[Kn,be]=K(j),qe=a.forwardRef((e,o)=>{const n=Ze(j,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,c=$(j,e.__scopeMenu),u=ee(j,e.__scopeMenu);return t.jsx(Z.Provider,{scope:e.__scopeMenu,children:t.jsx(ce,{present:r||c.open,children:t.jsx(Z.Slot,{scope:e.__scopeMenu,children:u.modal?t.jsx($n,{...s,ref:o}):t.jsx(Un,{...s,ref:o})})})})}),$n=a.forwardRef((e,o)=>{const n=$(j,e.__scopeMenu),r=a.useRef(null),s=V(o,r);return a.useEffect(()=>{const c=r.current;if(c)return zt(c)},[]),t.jsx(_e,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:v(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Un=a.forwardRef((e,o)=>{const n=$(j,e.__scopeMenu);return t.jsx(_e,{...e,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_e=a.forwardRef((e,o)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:f,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:i,onInteractOutside:p,onDismiss:w,disableOutsideScroll:h,...C}=e,R=$(j,n),l=ee(j,n),M=ue(n),S=Je(n),b=An(n),[N,te]=a.useState(null),L=a.useRef(null),_=V(o,L,R.onContentChange),U=a.useRef(0),G=a.useRef(""),Y=a.useRef(0),X=a.useRef(null),ne=a.useRef("right"),oe=a.useRef(0),le=h?Wt:a.Fragment,P=h?{as:Zt,allowPinchZoom:!0}:void 0,Ut=g=>{var z,Ne;const I=G.current+g,E=b().filter(T=>!T.disabled),A=document.activeElement,pe=(z=E.find(T=>T.ref.current===A))==null?void 0:z.textValue,fe=E.map(T=>T.textValue),je=eo(fe,I,pe),H=(Ne=E.find(T=>T.textValue===je))==null?void 0:Ne.ref.current;(function T(Ee){G.current=Ee,window.clearTimeout(U.current),Ee!==""&&(U.current=window.setTimeout(()=>T(""),1e3))})(I),H&&setTimeout(()=>H.focus())};a.useEffect(()=>()=>window.clearTimeout(U.current),[]),Vt();const B=a.useCallback(g=>{var E,A;return ne.current===((E=X.current)==null?void 0:E.side)&&no(g,(A=X.current)==null?void 0:A.area)},[]);return t.jsx(Kn,{scope:n,searchRef:G,onItemEnter:a.useCallback(g=>{B(g)&&g.preventDefault()},[B]),onItemLeave:a.useCallback(g=>{var I;B(g)||((I=L.current)==null||I.focus(),te(null))},[B]),onTriggerLeave:a.useCallback(g=>{B(g)&&g.preventDefault()},[B]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:a.useCallback(g=>{X.current=g},[]),children:t.jsx(le,{...P,children:t.jsx(Yt,{asChild:!0,trapped:s,onMountAutoFocus:v(c,g=>{var I;g.preventDefault(),(I=L.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:t.jsx(Xt,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:m,onPointerDownOutside:x,onFocusOutside:i,onInteractOutside:p,onDismiss:w,children:t.jsx(jn,{asChild:!0,...S,dir:l.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:te,onEntryFocus:v(f,g=>{l.isUsingKeyboardRef.current||g.preventDefault()}),preventScrollOnEntryFocus:!0,children:t.jsx(Ht,{role:"menu","aria-orientation":"vertical","data-state":xt(R.open),"data-radix-menu-content":"",dir:l.dir,...M,...C,ref:_,style:{outline:"none",...C.style},onKeyDown:v(C.onKeyDown,g=>{const E=g.target.closest("[data-radix-menu-content]")===g.currentTarget,A=g.ctrlKey||g.altKey||g.metaKey,pe=g.key.length===1;E&&(g.key==="Tab"&&g.preventDefault(),!A&&pe&&Ut(g.key));const fe=L.current;if(g.target!==fe||!Dn.includes(g.key))return;g.preventDefault();const H=b().filter(z=>!z.disabled).map(z=>z.ref.current);Xe.includes(g.key)&&H.reverse(),Qn(H)}),onBlur:v(e.onBlur,g=>{g.currentTarget.contains(g.target)||(window.clearTimeout(U.current),G.current="")}),onPointerMove:v(e.onPointerMove,Q(g=>{const I=g.target,E=oe.current!==g.clientX;if(g.currentTarget.contains(I)&&E){const A=g.clientX>oe.current?"right":"left";ne.current=A,oe.current=g.clientX}}))})})})})})})});qe.displayName=j;var Bn="MenuGroup",ye=a.forwardRef((e,o)=>{const{__scopeMenu:n,...r}=e;return t.jsx(O.div,{role:"group",...r,ref:o})});ye.displayName=Bn;var zn="MenuLabel",et=a.forwardRef((e,o)=>{const{__scopeMenu:n,...r}=e;return t.jsx(O.div,{...r,ref:o})});et.displayName=zn;var ae="MenuItem",Pe="menu.itemSelect",de=a.forwardRef((e,o)=>{const{disabled:n=!1,onSelect:r,...s}=e,c=a.useRef(null),u=ee(ae,e.__scopeMenu),d=be(ae,e.__scopeMenu),f=V(o,c),m=a.useRef(!1),x=()=>{const i=c.current;if(!n&&i){const p=new CustomEvent(Pe,{bubbles:!0,cancelable:!0});i.addEventListener(Pe,w=>r==null?void 0:r(w),{once:!0}),Qt(i,p),p.defaultPrevented?m.current=!1:u.onClose()}};return t.jsx(tt,{...s,ref:f,disabled:n,onClick:v(e.onClick,x),onPointerDown:i=>{var p;(p=e.onPointerDown)==null||p.call(e,i),m.current=!0},onPointerUp:v(e.onPointerUp,i=>{var p;m.current||(p=i.currentTarget)==null||p.click()}),onKeyDown:v(e.onKeyDown,i=>{const p=d.searchRef.current!=="";n||p&&i.key===" "||ge.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});de.displayName=ae;var tt=a.forwardRef((e,o)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...c}=e,u=be(ae,n),d=Je(n),f=a.useRef(null),m=V(o,f),[x,i]=a.useState(!1),[p,w]=a.useState("");return a.useEffect(()=>{const h=f.current;h&&w((h.textContent??"").trim())},[c.children]),t.jsx(Z.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:t.jsx(Nn,{asChild:!0,...d,focusable:!r,children:t.jsx(O.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:m,onPointerMove:v(e.onPointerMove,Q(h=>{r?u.onItemLeave(h):(u.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(e.onPointerLeave,Q(h=>u.onItemLeave(h))),onFocus:v(e.onFocus,()=>i(!0)),onBlur:v(e.onBlur,()=>i(!1))})})})}),Vn="MenuCheckboxItem",nt=a.forwardRef((e,o)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return t.jsx(ct,{scope:e.__scopeMenu,checked:n,children:t.jsx(de,{role:"menuitemcheckbox","aria-checked":se(n)?"mixed":n,...s,ref:o,"data-state":Se(n),onSelect:v(s.onSelect,()=>r==null?void 0:r(se(n)?!0:!n),{checkForDefaultPrevented:!1})})})});nt.displayName=Vn;var ot="MenuRadioGroup",[Yn,Xn]=K(ot,{value:void 0,onValueChange:()=>{}}),rt=a.forwardRef((e,o)=>{const{value:n,onValueChange:r,...s}=e,c=we(r);return t.jsx(Yn,{scope:e.__scopeMenu,value:n,onValueChange:c,children:t.jsx(ye,{...s,ref:o})})});rt.displayName=ot;var at="MenuRadioItem",st=a.forwardRef((e,o)=>{const{value:n,...r}=e,s=Xn(at,e.__scopeMenu),c=n===s.value;return t.jsx(ct,{scope:e.__scopeMenu,checked:c,children:t.jsx(de,{role:"menuitemradio","aria-checked":c,...r,ref:o,"data-state":Se(c),onSelect:v(r.onSelect,()=>{var u;return(u=s.onValueChange)==null?void 0:u.call(s,n)},{checkForDefaultPrevented:!1})})})});st.displayName=at;var Re="MenuItemIndicator",[ct,Hn]=K(Re,{checked:!1}),it=a.forwardRef((e,o)=>{const{__scopeMenu:n,forceMount:r,...s}=e,c=Hn(Re,n);return t.jsx(ce,{present:r||se(c.checked)||c.checked===!0,children:t.jsx(O.span,{...s,ref:o,"data-state":Se(c.checked)})})});it.displayName=Re;var Jn="MenuSeparator",ut=a.forwardRef((e,o)=>{const{__scopeMenu:n,...r}=e;return t.jsx(O.div,{role:"separator","aria-orientation":"horizontal",...r,ref:o})});ut.displayName=Jn;var Wn="MenuArrow",dt=a.forwardRef((e,o)=>{const{__scopeMenu:n,...r}=e,s=ue(n);return t.jsx(Jt,{...s,...r,ref:o})});dt.displayName=Wn;var Zn="MenuSub",[Qo,lt]=K(Zn),J="MenuSubTrigger",pt=a.forwardRef((e,o)=>{const n=$(J,e.__scopeMenu),r=ee(J,e.__scopeMenu),s=lt(J,e.__scopeMenu),c=be(J,e.__scopeMenu),u=a.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:f}=c,m={__scopeMenu:e.__scopeMenu},x=a.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return a.useEffect(()=>x,[x]),a.useEffect(()=>{const i=d.current;return()=>{window.clearTimeout(i),f(null)}},[d,f]),t.jsx(Me,{asChild:!0,...m,children:t.jsx(tt,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":xt(n.open),...e,ref:Ge(o,s.onTriggerChange),onClick:i=>{var p;(p=e.onClick)==null||p.call(e,i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:v(e.onPointerMove,Q(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!n.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),x()},100))})),onPointerLeave:v(e.onPointerLeave,Q(i=>{var w,h;x();const p=(w=n.content)==null?void 0:w.getBoundingClientRect();if(p){const C=(h=n.content)==null?void 0:h.dataset.side,R=C==="right",l=R?-5:5,M=p[R?"left":"right"],S=p[R?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+l,y:i.clientY},{x:M,y:p.top},{x:S,y:p.top},{x:S,y:p.bottom},{x:M,y:p.bottom}],side:C}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:v(e.onKeyDown,i=>{var w;const p=c.searchRef.current!=="";e.disabled||p&&i.key===" "||Pn[r.dir].includes(i.key)&&(n.onOpenChange(!0),(w=n.content)==null||w.focus(),i.preventDefault())})})})});pt.displayName=J;var ft="MenuSubContent",mt=a.forwardRef((e,o)=>{const n=Ze(j,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,c=$(j,e.__scopeMenu),u=ee(j,e.__scopeMenu),d=lt(ft,e.__scopeMenu),f=a.useRef(null),m=V(o,f);return t.jsx(Z.Provider,{scope:e.__scopeMenu,children:t.jsx(ce,{present:r||c.open,children:t.jsx(Z.Slot,{scope:e.__scopeMenu,children:t.jsx(_e,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:m,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{var i;u.isUsingKeyboardRef.current&&((i=f.current)==null||i.focus()),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:v(e.onFocusOutside,x=>{x.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:v(e.onEscapeKeyDown,x=>{u.onClose(),x.preventDefault()}),onKeyDown:v(e.onKeyDown,x=>{var w;const i=x.currentTarget.contains(x.target),p=Tn[u.dir].includes(x.key);i&&p&&(c.onOpenChange(!1),(w=d.trigger)==null||w.focus(),x.preventDefault())})})})})})});mt.displayName=ft;function xt(e){return e?"open":"closed"}function se(e){return e==="indeterminate"}function Se(e){return se(e)?"indeterminate":e?"checked":"unchecked"}function Qn(e){const o=document.activeElement;for(const n of e)if(n===o||(n.focus(),document.activeElement!==o))return}function qn(e,o){return e.map((n,r)=>e[(o+r)%e.length])}function eo(e,o,n){const s=o.length>1&&Array.from(o).every(m=>m===o[0])?o[0]:o,c=n?e.indexOf(n):-1;let u=qn(e,Math.max(c,0));s.length===1&&(u=u.filter(m=>m!==n));const f=u.find(m=>m.toLowerCase().startsWith(s.toLowerCase()));return f!==n?f:void 0}function to(e,o){const{x:n,y:r}=e;let s=!1;for(let c=0,u=o.length-1;c<o.length;u=c++){const d=o[c].x,f=o[c].y,m=o[u].x,x=o[u].y;f>r!=x>r&&n<(m-d)*(r-f)/(x-f)+d&&(s=!s)}return s}function no(e,o){if(!o)return!1;const n={x:e.clientX,y:e.clientY};return to(n,o)}function Q(e){return o=>o.pointerType==="mouse"?e(o):void 0}var oo=We,ro=Me,ao=Qe,so=qe,co=ye,io=et,uo=de,lo=nt,po=rt,fo=st,mo=it,xo=ut,ho=dt,go=pt,vo=mt,Ie="DropdownMenu",[wo,qo]=Fe(Ie,[He]),y=He(),[Mo,ht]=wo(Ie),gt=e=>{const{__scopeDropdownMenu:o,children:n,dir:r,open:s,defaultOpen:c,onOpenChange:u,modal:d=!0}=e,f=y(o),m=a.useRef(null),[x=!1,i]=Oe({prop:s,defaultProp:c,onChange:u});return t.jsx(Mo,{scope:o,triggerId:xe(),triggerRef:m,contentId:xe(),open:x,onOpenChange:i,onOpenToggle:a.useCallback(()=>i(p=>!p),[i]),modal:d,children:t.jsx(oo,{...f,open:x,onOpenChange:i,dir:r,modal:d,children:n})})};gt.displayName=Ie;var vt="DropdownMenuTrigger",wt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,c=ht(vt,n),u=y(n);return t.jsx(ro,{asChild:!0,...u,children:t.jsx(O.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Ge(o,c.triggerRef),onPointerDown:v(e.onPointerDown,d=>{!r&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:v(e.onKeyDown,d=>{r||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});wt.displayName=vt;var Co="DropdownMenuPortal",Mt=e=>{const{__scopeDropdownMenu:o,...n}=e,r=y(o);return t.jsx(ao,{...r,...n})};Mt.displayName=Co;var Ct="DropdownMenuContent",bt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=ht(Ct,n),c=y(n),u=a.useRef(!1);return t.jsx(so,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...r,ref:o,onCloseAutoFocus:v(e.onCloseAutoFocus,d=>{var f;u.current||(f=s.triggerRef.current)==null||f.focus(),u.current=!1,d.preventDefault()}),onInteractOutside:v(e.onInteractOutside,d=>{const f=d.detail.originalEvent,m=f.button===0&&f.ctrlKey===!0,x=f.button===2||m;(!s.modal||x)&&(u.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bt.displayName=Ct;var bo="DropdownMenuGroup",_o=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(co,{...s,...r,ref:o})});_o.displayName=bo;var yo="DropdownMenuLabel",_t=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(io,{...s,...r,ref:o})});_t.displayName=yo;var Ro="DropdownMenuItem",yt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(uo,{...s,...r,ref:o})});yt.displayName=Ro;var So="DropdownMenuCheckboxItem",Rt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(lo,{...s,...r,ref:o})});Rt.displayName=So;var Io="DropdownMenuRadioGroup",jo=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(po,{...s,...r,ref:o})});jo.displayName=Io;var No="DropdownMenuRadioItem",St=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(fo,{...s,...r,ref:o})});St.displayName=No;var Eo="DropdownMenuItemIndicator",It=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(mo,{...s,...r,ref:o})});It.displayName=Eo;var Do="DropdownMenuSeparator",jt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(xo,{...s,...r,ref:o})});jt.displayName=Do;var Po="DropdownMenuArrow",To=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(ho,{...s,...r,ref:o})});To.displayName=Po;var Ao="DropdownMenuSubTrigger",Nt=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(go,{...s,...r,ref:o})});Nt.displayName=Ao;var ko="DropdownMenuSubContent",Et=a.forwardRef((e,o)=>{const{__scopeDropdownMenu:n,...r}=e,s=y(n);return t.jsx(vo,{...s,...r,ref:o,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Et.displayName=ko;var Oo=gt,Fo=wt,Lo=Mt,Dt=bt,Pt=_t,Tt=yt,At=Rt,kt=St,Ot=It,Ft=jt,Lt=Nt,Gt=Et;const Go=Oo,Ko=Fo,$o=a.forwardRef(({className:e,inset:o,children:n,...r},s)=>t.jsxs(Lt,{ref:s,className:F("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",o&&"pl-8",e),...r,children:[n,t.jsx(ln,{className:"ml-auto h-4 w-4"})]}));$o.displayName=Lt.displayName;const Uo=a.forwardRef(({className:e,...o},n)=>t.jsx(Gt,{ref:n,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o}));Uo.displayName=Gt.displayName;const Kt=a.forwardRef(({className:e,sideOffset:o=4,...n},r)=>t.jsx(Lo,{children:t.jsx(Dt,{ref:r,sideOffset:o,className:F("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Kt.displayName=Dt.displayName;const W=a.forwardRef(({className:e,inset:o,...n},r)=>t.jsx(Tt,{ref:r,className:F("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o&&"pl-8",e),...n}));W.displayName=Tt.displayName;const Bo=a.forwardRef(({className:e,children:o,checked:n,...r},s)=>t.jsxs(At,{ref:s,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Ot,{children:t.jsx(Ke,{className:"h-4 w-4"})})}),o]}));Bo.displayName=At.displayName;const zo=a.forwardRef(({className:e,children:o,...n},r)=>t.jsxs(kt,{ref:r,className:F("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Ot,{children:t.jsx(mn,{className:"h-2 w-2 fill-current"})})}),o]}));zo.displayName=kt.displayName;const $t=a.forwardRef(({className:e,inset:o,...n},r)=>t.jsx(Pt,{ref:r,className:F("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",e),...n}));$t.displayName=Pt.displayName;const ve=a.forwardRef(({className:e,...o},n)=>t.jsx(Ft,{ref:n,className:F("-mx-1 my-1 h-px bg-muted",e),...o}));ve.displayName=Ft.displayName;const er=()=>{const{toast:e}=tn(),{showNotification:o}=nn(),[n,r]=a.useState([]),[s,c]=a.useState(""),[u,d]=a.useState("All"),[f,m]=a.useState("all"),[x,i]=a.useState(!0),p=a.useCallback(async()=>{i(!0);try{console.log("ðŸ” Loading appointments using REST API (like Pets)...");const l="https://ztubrfjqsckplmelezws.supabase.co",M="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp0dWJyZmpxc2NrcGxtZWxlendzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMDQ5NjcsImV4cCI6MjA2NTg4MDk2N30.qyjJEwQKzk6t0tdSmRYZghBG1GMAE-2Y4g3obbwblr0";let S=`${l}/rest/v1/appointments?select=*&order=appointment_date.asc`;const b=await fetch(S,{headers:{apikey:M,Authorization:`Bearer ${M}`}});if(!b.ok)throw new Error(`Failed to fetch appointments: ${b.status} ${b.statusText}`);const N=await b.json();console.log("âœ… REST API call succeeded:",N.length),r(N)}catch(l){console.error("âŒ REST API call failed:",l);try{console.log("ðŸ”„ Trying original methods as fallback...");const M=await cn();console.log("âœ… Original method succeeded:",M.length),r(M)}catch(M){console.error("âŒ Original method failed:",M),e({title:"Error",description:`Could not load appointments: ${M instanceof Error?M.message:"Unknown error"}`,variant:"destructive"})}}finally{i(!1)}},[e]);a.useEffect(()=>{p()},[p]);const w=async(l,M)=>{if(await un(l,M)){p(),e({title:"Status Updated",description:`Appointment status changed to ${M}`});const b=n.find(N=>N.id===l);b&&o({petName:b.pet_name,service:b.service,date:b.appointment_date,timeSlot:b.time_slot,ownerName:b.owner_name})}},h=async l=>{await dn(l)&&(p(),e({title:"Appointment Deleted",description:"The appointment has been removed."}))},C=n.filter(l=>{const M=l.pet_name.toLowerCase().includes(s.toLowerCase())||l.owner_name.toLowerCase().includes(s.toLowerCase())||l.service.toLowerCase().includes(s.toLowerCase())||l.id.toLowerCase().includes(s.toLowerCase()),S=u==="All"||l.status===u,b=f==="all"||l.service===f;return M&&S&&b}),R=l=>{switch(l){case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"scheduled":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Appointments"})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx(pn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),t.jsx("input",{type:"text",placeholder:"Search appointments...",className:"pl-10 pr-4 py-2 w-full rounded-md border focus:outline-none focus:ring-2 focus:ring-pet-blue-dark dark:bg-gray-800 dark:border-gray-700",value:s,onChange:l=>c(l.target.value)})]}),t.jsxs("select",{className:"px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",value:u,onChange:l=>d(l.target.value),children:[t.jsx("option",{value:"All",children:"All Status"}),t.jsx("option",{value:"scheduled",children:"Scheduled"}),t.jsx("option",{value:"completed",children:"Completed"}),t.jsx("option",{value:"cancelled",children:"Cancelled"})]}),t.jsxs("select",{className:"px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",value:f,onChange:l=>m(l.target.value),children:[t.jsx("option",{value:"all",children:"All Services"}),t.jsx("option",{value:"checkup",children:"Checkup"}),t.jsx("option",{value:"vaccination",children:"Vaccination"}),t.jsx("option",{value:"grooming",children:"Grooming"}),t.jsx("option",{value:"surgery",children:"Surgery"}),t.jsx("option",{value:"deworming",children:"Deworming"})]})]}),t.jsx("div",{className:"border rounded-md dark:border-gray-700",children:t.jsxs(rn,{children:[t.jsx(an,{children:t.jsxs(re,{children:[t.jsx(k,{children:"ID"}),t.jsx(k,{children:"Pet"}),t.jsx(k,{children:"Owner"}),t.jsx(k,{children:"Service"}),t.jsx(k,{children:"Date"}),t.jsx(k,{children:"Time"}),t.jsx(k,{children:"Status"}),t.jsx(k,{className:"w-12"})]})}),t.jsx(sn,{children:x?t.jsx(re,{children:t.jsx(D,{colSpan:8,className:"text-center py-8",children:t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx(De,{className:"animate-spin h-4 w-4 mr-2"}),"Loading appointments..."]})})}):C.length>0?C.slice().reverse().map(l=>t.jsxs(re,{children:[t.jsx(D,{className:"font-medium",children:l.id.substring(0,8)}),t.jsx(D,{children:l.pet_name}),t.jsx(D,{children:l.owner_name}),t.jsx(D,{className:"capitalize",children:l.service}),t.jsx(D,{children:new Date(l.appointment_date).toLocaleDateString()}),t.jsx(D,{children:l.time_slot}),t.jsx(D,{children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(l.status)}`,children:l.status})}),t.jsx(D,{children:t.jsxs(Go,{children:[t.jsx(Ko,{className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none",children:t.jsx(xn,{className:"h-4 w-4"})}),t.jsxs(Kt,{align:"end",children:[t.jsx($t,{children:"Actions"}),t.jsx(ve,{}),t.jsxs(W,{onClick:()=>w(l.id,"completed"),className:"flex items-center gap-2",children:[t.jsx(Ke,{className:"h-4 w-4"}),t.jsx("span",{children:"Mark as Completed"})]}),t.jsxs(W,{onClick:()=>w(l.id,"scheduled"),className:"flex items-center gap-2",children:[t.jsx(De,{className:"h-4 w-4"}),t.jsx("span",{children:"Mark as Scheduled"})]}),t.jsxs(W,{onClick:()=>w(l.id,"cancelled"),className:"flex items-center gap-2",children:[t.jsx(on,{className:"h-4 w-4"}),t.jsx("span",{children:"Cancel"})]}),t.jsx(ve,{}),t.jsxs(W,{onClick:()=>h(l.id),className:"flex items-center gap-2 text-red-600 focus:text-red-600",children:[t.jsx(fn,{className:"h-4 w-4"}),t.jsx("span",{children:"Delete"})]})]})]})})]},l.id)):t.jsx(re,{children:t.jsx(D,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No appointments found"})})})]})})]})};export{er as default};
