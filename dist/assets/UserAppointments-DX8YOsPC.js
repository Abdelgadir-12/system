import{c as A,r as a,j as e,D as C,m as k,n as D,o as S,T as _,s as T,t as i,w as B,u as z,C as f,a as N,x as E,y as F,z as L}from"./index-v6CNqsEH.js";import{u as U,g as y}from"./appointmentDB-CWMaHyPF.js";import{C as v}from"./calendar-days-DC4l2CTL.js";import{C as M}from"./clock-BzgeTgUr.js";import{F as Y}from"./file-text-je5NDkBW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=A("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),H=({open:t,onOpenChange:n,appointment:l,onNotesUpdated:o})=>{const[c,m]=a.useState(""),[d,r]=a.useState(!1);a.useEffect(()=>{m(l.user_notes||"")},[l]);const h=async()=>{try{r(!0),await U(l.id,c),await o(),n(!1)}finally{r(!1)}};return e.jsx(C,{open:t,onOpenChange:n,children:e.jsxs(k,{children:[e.jsx(D,{children:e.jsx(S,{children:"Appointment Notes"})}),e.jsx("div",{className:"space-y-3",children:e.jsx(_,{value:c,onChange:x=>m(x.target.value),placeholder:"Add your notes for this appointment..."})}),e.jsxs(T,{children:[e.jsx(i,{variant:"outline",onClick:()=>n(!1),disabled:d,children:"Cancel"}),e.jsx(i,{onClick:h,disabled:d,children:d?"Saving...":"Save"})]})]})})},K=()=>{const{user:t}=B(),[n,l]=a.useState([]),[o,c]=a.useState(null),[m,d]=a.useState(!1),r=z();a.useEffect(()=>{(async()=>{if(t){const u=await y(t.id);u.sort((p,g)=>{const j=new Date(p.appointment_date).getTime();return new Date(g.appointment_date).getTime()-j}),l(u)}})()},[t]);const h=s=>{switch(s){case"scheduled":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},x=()=>{r("/appointment")},w=s=>{c(s),d(!0)},b=async()=>{if(t){const s=await y(t.id);s.sort((u,p)=>{const g=new Date(u.appointment_date).getTime();return new Date(p.appointment_date).getTime()-g}),l(s)}};return e.jsxs("div",{className:"container max-w-4xl py-12",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Appointments"}),e.jsx("div",{className:"space-y-6",children:n.length===0?e.jsx(f,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-10",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(v,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No appointments yet"}),e.jsx("p",{className:"text-center text-muted-foreground mb-6",children:"You haven't scheduled any appointments yet"}),e.jsx(i,{onClick:x,children:"Schedule Appointment"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Appointments"}),e.jsx(i,{onClick:x,variant:"outline",size:"sm",children:"Schedule New"})]}),e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs(f,{className:"overflow-hidden",children:[e.jsx("div",{className:`h-2 ${s.status==="scheduled"?"bg-blue-500":s.status==="completed"?"bg-green-500":s.status==="cancelled"?"bg-red-500":"bg-yellow-500"}`}),e.jsxs(E,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(F,{children:[s.pet_name," - ",s.service]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(s.status)}`,children:s.status})]}),e.jsxs(L,{children:["Appointment #",s.id]})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(v,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Date"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.appointment_date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Time"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.time_slot})]})]}),s.user_notes&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Your Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground bg-muted/50 p-2 rounded-md",children:s.user_notes})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>w(s),className:"flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),s.user_notes?"Edit Notes":"Add Notes"]}),s.status!=="cancelled"&&s.status!=="completed"&&e.jsx(i,{size:"sm",variant:"outline",onClick:()=>r(`/appointment?reschedule=${s.id}`),children:"Reschedule"})]})]})]},s.id))})]})}),o&&e.jsx(H,{open:m,onOpenChange:d,appointment:o,onNotesUpdated:b})]})};export{K as default};
