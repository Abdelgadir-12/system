import{r as m,u as C,v as P,j as e,C as S,x as b,y as L,z as E,a as U,k as u,t as k,_ as I,L as q}from"./index-v6CNqsEH.js";import{I as h}from"./input-cEcEyZ5x.js";const v="local_users",D=()=>{try{const s=localStorage.getItem(v);return s?JSON.parse(s):[]}catch{return[]}},F=s=>{localStorage.setItem(v,JSON.stringify(s))},A=(s,p,l)=>{const c=D(),r=p.trim().toLowerCase();if(c.some(x=>x.email.toLowerCase()===r))throw new Error("This email is already registered. Please log in.");const t={id:typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`local-${Date.now()}`,name:s.trim(),email:r,role:r==="admin@example.com"?"admin":"customer",password:l};return c.push(t),F(c),{id:t.id,name:t.name,email:t.email,role:t.role}},O=()=>{const[s,p]=m.useState(""),[l,c]=m.useState(""),[r,g]=m.useState(""),[t,x]=m.useState(""),[f,y]=m.useState(!1),j=C(),{toast:i}=P(),N=async a=>{if(a.preventDefault(),!s.trim()){i({title:"Name required",description:"Please enter your full name.",variant:"destructive"});return}if(!l.trim()){i({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}if(r.length<6){i({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}if(r!==t){i({title:"Passwords don't match",description:"Please make sure your passwords match.",variant:"destructive"});return}y(!0);try{A(s.trim(),l.trim(),r),i({title:"Account created successfully!",description:"You can now log in with your email and password."}),j("/login")}catch(d){console.error("Signup error:",d);let n="An unexpected error occurred. Please try again.";if(d&&typeof d=="object"&&"message"in d){const w=d,o=w.message.toLowerCase();o.includes("already registered")||o.includes("already exists")?n="This email is already registered. Please check your email for confirmation or try logging in.":o.includes("invalid email")?n="Please enter a valid email address.":o.includes("password")?n="Password must be at least 6 characters long.":o.includes("network")||o.includes("connection")?n="Network error. Please check your internet connection and try again.":n=w.message}i({title:"Registration failed",description:n,variant:"destructive"})}finally{y(!1)}};return e.jsx("div",{className:"container flex items-center justify-center min-h-screen px-4 py-12",children:e.jsx("div",{className:"w-full max-w-4xl space-y-8",children:e.jsxs(S,{className:"w-full max-w-md mx-auto",children:[e.jsxs(b,{className:"space-y-1",children:[e.jsx(L,{className:"text-2xl font-bold text-center",children:"Create an Account"}),e.jsx(E,{className:"text-center",children:"Enter your information to create an account"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"name",children:"Full Name"}),e.jsx(h,{id:"name",type:"text",placeholder:"John Doe",value:s,onChange:a=>p(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",placeholder:"name@example.com",value:l,onChange:a=>c(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx(h,{id:"password",type:"password",value:r,onChange:a=>g(a.target.value),required:!0,minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(h,{id:"confirmPassword",type:"password",value:t,onChange:a=>x(a.target.value),required:!0,minLength:6})]}),e.jsx("div",{className:"pt-4",children:e.jsx(k,{type:"submit",className:"w-full",disabled:f,children:f?"Creating account...":"Sign Up"})})]})}),e.jsx(I,{className:"flex justify-center",children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(q,{to:"/login",className:"text-pet-blue-dark hover:underline",children:"Sign in"})]})})]})})})};export{O as default};
