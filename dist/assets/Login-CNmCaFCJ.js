import{K as O,r,O as q,P as B,j as e,Q as L,U as E,V as H,W as K,Y as T,i as P,Z as z,w as W,u as X,v as Q,C as U,x as V,y as Y,z as Z,a as $,k as j,t as G,_ as J,L as ee}from"./index-v6CNqsEH.js";import{I as S}from"./input-cEcEyZ5x.js";var N="Checkbox",[te,ie]=O(N),[se,ae]=te(N),R=r.forwardRef((t,d)=>{const{__scopeCheckbox:s,name:u,checked:p,defaultChecked:n,required:m,disabled:c,value:h="on",onCheckedChange:x,form:i,...b}=t,[a,l]=r.useState(null),C=q(d,o=>l(o)),k=r.useRef(!1),w=a?i||!!a.closest("form"):!0,[g=!1,y]=B({prop:p,defaultProp:n,onChange:x}),M=r.useRef(g);return r.useEffect(()=>{const o=a==null?void 0:a.form;if(o){const v=()=>y(M.current);return o.addEventListener("reset",v),()=>o.removeEventListener("reset",v)}},[a,y]),e.jsxs(se,{scope:s,state:g,disabled:c,children:[e.jsx(L.button,{type:"button",role:"checkbox","aria-checked":f(g)?"mixed":g,"aria-required":m,"data-state":_(g),"data-disabled":c?"":void 0,disabled:c,value:h,...b,ref:C,onKeyDown:E(t.onKeyDown,o=>{o.key==="Enter"&&o.preventDefault()}),onClick:E(t.onClick,o=>{y(v=>f(v)?!0:!v),w&&(k.current=o.isPropagationStopped(),k.current||o.stopPropagation())})}),w&&e.jsx(re,{control:a,bubbles:!k.current,name:u,value:h,checked:g,required:m,disabled:c,form:i,style:{transform:"translateX(-100%)"},defaultChecked:f(n)?!1:n})]})});R.displayName=N;var I="CheckboxIndicator",D=r.forwardRef((t,d)=>{const{__scopeCheckbox:s,forceMount:u,...p}=t,n=ae(I,s);return e.jsx(H,{present:u||f(n.state)||n.state===!0,children:e.jsx(L.span,{"data-state":_(n.state),"data-disabled":n.disabled?"":void 0,...p,ref:d,style:{pointerEvents:"none",...t.style}})})});D.displayName=I;var re=t=>{const{control:d,checked:s,bubbles:u=!0,defaultChecked:p,...n}=t,m=r.useRef(null),c=K(s),h=T(d);r.useEffect(()=>{const i=m.current,b=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(b,"checked").set;if(c!==s&&l){const C=new Event("click",{bubbles:u});i.indeterminate=f(s),l.call(i,f(s)?!1:s),i.dispatchEvent(C)}},[c,s,u]);const x=r.useRef(f(s)?!1:s);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:p??x.current,...n,tabIndex:-1,ref:m,style:{...t.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function f(t){return t==="indeterminate"}function _(t){return f(t)?"indeterminate":t?"checked":"unchecked"}var A=R,ne=D;const F=r.forwardRef(({className:t,...d},s)=>e.jsx(A,{ref:s,className:P("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...d,children:e.jsx(ne,{className:P("flex items-center justify-center text-current"),children:e.jsx(z,{className:"h-4 w-4"})})}));F.displayName=A.displayName;const le=()=>{const[t,d]=r.useState(""),[s,u]=r.useState(""),[p,n]=r.useState(!0),[m,c]=r.useState(!1),{login:h}=W(),x=X(),{toast:i}=Q(),b=async a=>{a.preventDefault(),console.log("Form submitted, attempting login"),c(!0);try{console.log("Calling login function");const l=await h(t,s);console.log("Login result:",l),l.success?(console.log("Login successful, showing toast and navigating"),i({title:"Login successful",description:"Welcome back!"}),l.isAdmin?x("/admin"):x("/")):(console.log("Login failed"),i({title:"Login failed",description:"Invalid email or password. Please try again.",variant:"destructive"}))}catch(l){console.error("Login error:",l),i({title:"Login error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{console.log("Setting loading to false"),c(!1)}};return e.jsx("div",{className:"container flex items-center justify-center min-h-screen px-4 py-12",children:e.jsxs(U,{className:"w-full max-w-md",children:[e.jsxs(V,{className:"space-y-1",children:[e.jsx(Y,{className:"text-2xl font-bold text-center",children:"Login"}),e.jsx(Z,{className:"text-center",children:"Enter your credentials to access your account"})]}),e.jsx($,{children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",type:"email",placeholder:"name@example.com",value:t,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsx(S,{id:"password",type:"password",value:s,onChange:a=>u(a.target.value),required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{id:"remember",checked:p,onCheckedChange:a=>n(a)}),e.jsx(j,{htmlFor:"remember",className:"text-sm",children:"Remember me"})]}),e.jsx("div",{className:"pt-4",children:e.jsx(G,{type:"submit",className:"w-full",disabled:m,children:m?"Logging in...":"Sign In"})})]})}),e.jsx(J,{className:"flex flex-col",children:e.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-2",children:["Don't have an account?"," ",e.jsx(ee,{to:"/signup",className:"text-pet-blue-dark hover:underline",children:"Sign up"})]})})]})})};export{le as default};
