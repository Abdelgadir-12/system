import{c as G,w as L,v as T,r as x,j as e,D as H,m as I,n as z,o as q,p as V,k as c,A as D,E as S,F as P,G as F,H as n,s as $,t as B,C as U,a as Y,x as W,y as Z,z as J,_ as K,L as Q}from"./index-v6CNqsEH.js";import{I as p}from"./input-cEcEyZ5x.js";import{P as X}from"./paw-print-BUegN35H.js";import{T as ee}from"./trash-2-RYy7qFoW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=G("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),R={name:"",type:"dog",species:"dog",breed:"",breedOther:"",weight:"",birthDate:"",gender:"male"},se=({isOpen:d,setIsOpen:u,onPetAdded:a})=>{const{addPet:y,user:h}=L(),{toast:o}=T(),[s,i]=x.useState(R),[j,O]=x.useState(!1),[v,C]=x.useState(!1),w=["Golden Retriever","Labrador Retriever","German Shepherd","Bulldog","Poodle","Beagle","Rottweiler","Yorkshire Terrier","Dachshund","Siberian Husky","Boxer","Border Collie","Chihuahua","Shih Tzu","Mixed Breed","Other"],f=["Persian","Maine Coon","Siamese","Ragdoll","British Shorthair","Abyssinian","Birman","Oriental Shorthair","American Shorthair","Scottish Fold","Sphynx","Russian Blue","Mixed Breed","Other"],k=["Budgerigar","Cockatiel","Cockatoo","African Grey","Macaw","Parakeet","Canary","Finch","Lovebird","Conure","Mixed Breed","Other"],M=["Netherland Dwarf","Holland Lop","Mini Rex","Lionhead","Angora","Flemish Giant","Rex","Mini Lop","English Lop","French Lop","Mixed Breed","Other"],l=["Bearded Dragon","Leopard Gecko","Ball Python","Corn Snake","Iguana","Chameleon","Turtle","Tortoise","Monitor Lizard","Boa","Mixed Breed","Other"],E=["Hamster","Guinea Pig","Ferret","Chinchilla","Hedgehog","Sugar Glider","Rat","Mouse","Gerbil","Hamster","Mixed Breed","Other"],g=t=>{switch(t){case"dog":return w;case"cat":return f;case"bird":return k;case"rabbit":return M;case"reptile":return l;case"other":return E;default:return[]}},b=(t,m)=>{i(N=>{const A={...N,[t]:m};return t==="type"&&(A.species=m,A.breed="",A.breedOther="",C(!1)),t==="breed"&&(C(m==="Other"),m!=="Other"&&(A.breedOther="")),A})},r=async()=>{if(!(h!=null&&h.id)){o({title:"Not signed in",description:"Please log in to add a pet.",variant:"destructive"});return}if(!s.name.trim()){o({title:"Pet name required",description:"Please enter your pet's name.",variant:"destructive"});return}if(!s.birthDate){o({title:"Birth date required",description:"Please enter your pet's birth date.",variant:"destructive"});return}try{O(!0);let t=s.breed;s.breed==="Other"&&s.breedOther&&(t=s.breedOther);const m={...s,breed:t};console.log("Adding pet with data:",m),await y(m),console.log("Pet added successfully"),u(!1),i(R),a(),o({title:"Pet added",description:`${s.name} has been added to your pets.`})}catch(t){console.error("Error adding pet:",t),o({title:"Error",description:(t==null?void 0:t.message)||"Failed to add pet. Please try again.",variant:"destructive"})}finally{O(!1)}};return e.jsx(H,{open:d,onOpenChange:u,children:e.jsxs(I,{children:[e.jsxs(z,{children:[e.jsx(q,{children:"Add New Pet"}),e.jsx(V,{children:"Enter your pet's information below"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Pet Name*"}),e.jsx(p,{id:"name",value:s.name,onChange:t=>b("name",t.target.value),placeholder:"Enter pet name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"type",children:"Pet Type*"}),e.jsxs(D,{value:s.type,onValueChange:t=>b("type",t),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select type"})}),e.jsxs(F,{children:[e.jsx(n,{value:"dog",children:"Dog"}),e.jsx(n,{value:"cat",children:"Cat"}),e.jsx(n,{value:"bird",children:"Bird"}),e.jsx(n,{value:"rabbit",children:"Rabbit"}),e.jsx(n,{value:"hamster",children:"Hamster"}),e.jsx(n,{value:"fish",children:"Fish"}),e.jsx(n,{value:"reptile",children:"Reptile"}),e.jsx(n,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"gender",children:"Gender*"}),e.jsxs(D,{value:s.gender,onValueChange:t=>b("gender",t),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select gender"})}),e.jsxs(F,{children:[e.jsx(n,{value:"male",children:"Male"}),e.jsx(n,{value:"female",children:"Female"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"breed",children:"Breed (Optional)"}),e.jsxs(D,{value:s.breed,onValueChange:t=>b("breed",t),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select breed"})}),e.jsx(F,{children:g(s.type).map(t=>e.jsx(n,{value:t,children:t},t))})]})]}),v&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"breedOther",children:"Please specify the breed"}),e.jsx(p,{id:"breedOther",value:s.breedOther||"",onChange:t=>b("breedOther",t.target.value),placeholder:"Enter the specific breed name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"weight",children:"Weight (Optional)"}),e.jsx(p,{id:"weight",value:s.weight,onChange:t=>b("weight",t.target.value),placeholder:"Enter weight (e.g., 5 kg, 10 lbs)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"birthDate",children:"Birth Date*"}),e.jsx(p,{id:"birthDate",type:"date",value:s.birthDate,onChange:t=>b("birthDate",t.target.value),required:!0,max:new Date().toISOString().split("T")[0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required to calculate your pet's age"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"owner",children:"Owner"}),e.jsx(p,{id:"owner",value:(h==null?void 0:h.name)||"",disabled:!0,className:"bg-gray-50"})]})]}),e.jsxs($,{children:[e.jsx(B,{variant:"outline",onClick:()=>u(!1),disabled:j,children:"Cancel"}),e.jsx(B,{onClick:r,disabled:!s.name.trim()||!s.birthDate||j,children:j?"Adding...":"Add Pet"})]})]})})},ae=({isOpen:d,setIsOpen:u,currentPet:a,onPetUpdated:y})=>{const{updatePet:h,user:o}=L(),{toast:s}=T(),[i,j]=x.useState(R),[O,v]=x.useState(!1),C=["Golden Retriever","Labrador Retriever","German Shepherd","Bulldog","Poodle","Beagle","Rottweiler","Yorkshire Terrier","Dachshund","Siberian Husky","Boxer","Border Collie","Chihuahua","Shih Tzu","Mixed Breed","Other"],w=["Persian","Maine Coon","Siamese","Ragdoll","British Shorthair","Abyssinian","Birman","Oriental Shorthair","American Shorthair","Scottish Fold","Sphynx","Russian Blue","Mixed Breed","Other"],f=["Budgerigar","Cockatiel","Cockatoo","African Grey","Macaw","Parakeet","Canary","Finch","Lovebird","Conure","Mixed Breed","Other"],k=["Netherland Dwarf","Holland Lop","Mini Rex","Lionhead","Angora","Flemish Giant","Rex","Mini Lop","English Lop","French Lop","Mixed Breed","Other"],M=["Bearded Dragon","Leopard Gecko","Ball Python","Corn Snake","Iguana","Chameleon","Turtle","Tortoise","Monitor Lizard","Boa","Mixed Breed","Other"],l=["Hamster","Guinea Pig","Ferret","Chinchilla","Hedgehog","Sugar Glider","Rat","Mouse","Gerbil","Hamster","Mixed Breed","Other"],E=r=>{switch(r){case"dog":return C;case"cat":return w;case"bird":return f;case"rabbit":return k;case"reptile":return M;case"other":return l;default:return[]}};x.useEffect(()=>{if(a){let r=a.breed||"",t="";const N=E(a.type).includes(a.breed||"");a.breed&&!N?(r="Other",t=a.breed,v(!0)):v(!1),j({name:a.name,type:a.type==="fish"?"other":a.type,species:a.species,breed:r,breedOther:t,weight:a.weight||"",birthDate:a.birthDate,gender:a.gender})}},[a]);const g=(r,t)=>{j(m=>{const N={...m,[r]:t};return r==="type"&&["dog","cat","bird","fish","hamster","rabbit"].includes(t)&&(N.species=t,N.breed="",v(!1)),r==="breed"&&(v(t==="Other"),t!=="Other"&&(N.breedOther="")),N})},b=async()=>{if(!a)return;if(!i.birthDate){s({title:"Birth date required",description:"Please enter your pet's birth date.",variant:"destructive"});return}let r=i.breed;i.breed==="Other"&&i.breedOther&&(r=i.breedOther);const t={...i,breed:r};await h(a.id,t)?(y(),u(!1),s({title:"Pet updated",description:`${i.name}'s information has been updated.`})):s({title:"Error",description:"Failed to update pet. Please try again.",variant:"destructive"})};return e.jsx(H,{open:d,onOpenChange:u,children:e.jsxs(I,{children:[e.jsxs(z,{children:[e.jsx(q,{children:"Edit Pet"}),e.jsx(V,{children:"Update your pet's information"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-name",children:"Pet Name*"}),e.jsx(p,{id:"edit-name",value:i.name,onChange:r=>g("name",r.target.value),placeholder:"Enter pet name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-type",children:"Pet Type*"}),e.jsxs(D,{value:i.type,onValueChange:r=>g("type",r),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select type"})}),e.jsxs(F,{children:[e.jsx(n,{value:"dog",children:"Dog"}),e.jsx(n,{value:"cat",children:"Cat"}),e.jsx(n,{value:"bird",children:"Bird"}),e.jsx(n,{value:"rabbit",children:"Rabbit"}),e.jsx(n,{value:"hamster",children:"Hamster"}),e.jsx(n,{value:"reptile",children:"Reptile"}),e.jsx(n,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-gender",children:"Gender*"}),e.jsxs(D,{value:i.gender,onValueChange:r=>g("gender",r),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select gender"})}),e.jsxs(F,{children:[e.jsx(n,{value:"male",children:"Male"}),e.jsx(n,{value:"female",children:"Female"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-breed",children:"Breed (Optional)"}),e.jsxs(D,{value:i.breed,onValueChange:r=>g("breed",r),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select breed"})}),e.jsx(F,{children:E(i.type).map(r=>e.jsx(n,{value:r,children:r},r))})]})]}),O&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-breedOther",children:"Please specify the breed"}),e.jsx(p,{id:"edit-breedOther",value:i.breedOther||"",onChange:r=>g("breedOther",r.target.value),placeholder:"Enter the specific breed name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-weight",children:"Weight (Optional)"}),e.jsx(p,{id:"edit-weight",value:i.weight,onChange:r=>g("weight",r.target.value),placeholder:"Enter weight (e.g., 5 kg, 10 lbs)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-birthDate",children:"Birth Date*"}),e.jsx(p,{id:"edit-birthDate",type:"date",value:i.birthDate,onChange:r=>g("birthDate",r.target.value),required:!0,max:new Date().toISOString().split("T")[0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required to calculate your pet's age"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-owner",children:"Owner"}),e.jsx(p,{id:"edit-owner",value:(o==null?void 0:o.name)||"",disabled:!0,className:"bg-gray-50"})]})]}),e.jsxs($,{children:[e.jsx(B,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(B,{onClick:b,disabled:!i.name||!i.birthDate,children:"Save Changes"})]})]})})},ie=({onAddPet:d})=>e.jsx(U,{children:e.jsxs(Y,{className:"flex flex-col items-center justify-center py-10",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(X,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No pets yet"}),e.jsx("p",{className:"text-center text-muted-foreground mb-6",children:"Add your pets to keep track of their health records and appointments"}),e.jsxs(B,{onClick:d,children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Add Your First Pet"]})]})}),ne=({pet:d,onEdit:u,onDelete:a})=>{const{calculatePetAge:y}=L(),h=o=>{switch(o){case"dog":return"🐕";case"cat":return"🐈";case"bird":return"🦜";default:return"🐾"}};return e.jsxs(U,{children:[e.jsxs(W,{className:"pb-2",children:[e.jsxs(Z,{className:"flex justify-between",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2 text-xl",children:h(d.type)}),d.name]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(B,{variant:"ghost",size:"icon",onClick:()=>u(d),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(B,{variant:"ghost",size:"icon",onClick:()=>a(d),children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsx(J,{children:d.breed?`${d.type} · ${d.breed}`:d.type})]}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Birth Date:"}),e.jsx("span",{children:new Date(d.birthDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Age:"}),e.jsx("span",{children:y(d.birthDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"}),e.jsx("span",{className:"capitalize",children:d.gender})]})]})}),e.jsx(K,{className:"flex justify-end",children:e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[e.jsx(te,{className:"h-3 w-3 mr-1 fill-pet-teal stroke-none"}),"Since ",new Date(parseInt(d.id.split("-")[1])).toLocaleDateString()]})})]})},he=()=>{const{getUserPets:d,deletePet:u}=L(),{toast:a}=T(),[y,h]=x.useState([]),[o,s]=x.useState(!1),[i,j]=x.useState(!1),[O,v]=x.useState(null),[C,w]=x.useState(!0);x.useEffect(()=>{f()},[]);const f=async()=>{try{w(!0);const l=await d();h(l)}catch(l){console.error("Error fetching pets:",l),a({title:"Error",description:"Failed to load your pets. Please try again.",variant:"destructive"})}finally{w(!1)}},k=async l=>{confirm(`Are you sure you want to remove ${l.name} from your pets?`)&&(await u(l.id)?(await f(),a({title:"Pet removed",description:`${l.name} has been removed from your pets.`})):a({title:"Error",description:"Failed to remove pet. Please try again.",variant:"destructive"}))},M=l=>{v(l),j(!0)};return C?e.jsx("div",{className:"container max-w-4xl py-12",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-pulse",children:"Loading your pets..."})})}):e.jsxs("div",{className:"container max-w-4xl py-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Pets"}),e.jsxs(B,{onClick:()=>s(!0),children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Add Pet"]})]}),e.jsx("div",{className:"space-y-6",children:y.length===0?e.jsx(ie,{onAddPet:()=>s(!0)}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map(l=>e.jsx(ne,{pet:l,onEdit:M,onDelete:k},l.id))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(Q,{to:"/appointment",className:"text-pet-blue-dark hover:underline",children:"Schedule an appointment for your pet →"})})]})}),e.jsx(se,{isOpen:o,setIsOpen:s,onPetAdded:f}),e.jsx(ae,{isOpen:i,setIsOpen:j,currentPet:O,onPetUpdated:f})]})};export{he as default};
